<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Time Record</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<style>
:root{
--bg:#f1f5f9;
--card:#ffffff;
--primary:#2563eb;
--danger:#ef4444;
--text:#0f172a;
--muted:#64748b;
--border:#e2e8f0;
}

*{box-sizing:border-box}

body{
margin:0;
padding:60px 20px;
background:var(--bg);
color:var(--text);
font-family:system-ui,monospace;
}

.wrapper{max-width:920px;margin:auto}

.header{margin-bottom:26px}
.header h1{margin:0;font-size:26px}
.header p{margin:6px 0 0;color:var(--muted)}

.card{
background:var(--card);
border-radius:18px;
padding:26px;
box-shadow:0 10px 30px rgba(0,0,0,.06);
border:1px solid var(--border);
}

.section{margin-bottom:28px}
.section-title{
font-weight:700;
margin-bottom:12px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:16px;
}

.field label{
display:block;
font-size:13px;
color:var(--muted);
margin-bottom:6px;
}

.field input{
width:100%;
padding:11px 12px;
border-radius:10px;
border:1px solid var(--border);
background:#fff;
font-family:monospace;
}

.weekdays{
display:flex;
gap:8px;
flex-wrap:wrap;
}

.day-btn{
padding:8px 14px;
border-radius:999px;
border:1px solid var(--border);
background:#fff;
cursor:pointer;
font-weight:600;
transition:.15s;
}

.day-btn:hover{
border-color:var(--primary);
color:var(--primary);
}

.day-btn.active{
background:#fee2e2;
border-color:#fecaca;
color:#b91c1c;
}

.actions{
display:flex;
gap:12px;
margin-top:10px;
}

button{
padding:12px 20px;
border-radius:10px;
border:none;
font-weight:700;
cursor:pointer;
}

button.primary{background:var(--primary);color:#fff}
button.secondary{background:#16a34a;color:#fff}

textarea{
width:100%;
height:420px;
margin-top:16px;
padding:16px;
border-radius:12px;
border:1px solid var(--border);
background:#f8fafc;
font-family:monospace;
font-size:13px;
resize:vertical;
}
</style>
</head>

<body>

<div class="wrapper">

<div class="header">
<h1>Time Record - For Insert Query Database</h1>
<p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
</div>

<div class="card">

<div class="section">
<div class="section-title">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà & ‡πÄ‡∏ß‡∏•‡∏≤</div>
<div class="grid">
<div class="field">
<label>‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
<input id="dateRange">
</div>

<div class="field">
<label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</label>
<input type="time" id="timeIn" value="09:00">
</div>

<div class="field">
<label>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label>
<input type="time" id="timeOut" value="18:00">
</div>
</div>
</div>

<div class="section">
<div class="section-title">üö´ ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏±‡∏ô</div>
<div class="weekdays">
<button class="day-btn" data-day="1">‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</button>
<button class="day-btn" data-day="2">‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</button>
<button class="day-btn" data-day="3">‡∏û‡∏∏‡∏ò</button>
<button class="day-btn" data-day="4">‡∏û‡∏§‡∏´‡∏±‡∏™</button>
<button class="day-btn" data-day="5">‡∏®‡∏∏‡∏Å‡∏£‡πå</button>
<button class="day-btn active" data-day="6">‡πÄ‡∏™‡∏≤‡∏£‡πå</button>
<button class="day-btn active" data-day="0">‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</button>
</div>
</div>

<div class="section">
<div class="section-title">üë§ ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div>
<div class="grid">
<div class="field">
<label>Badge ID</label>
<input id="x2">
</div>
<div class="field">
<label>Employee ID</label>
<input id="x3">
</div>
</div>
</div>

<div class="actions">
<button class="primary" onclick="generateSQL()">Generate SQL</button>
<button class="secondary" onclick="copySQL()">Copy</button>
</div>

<textarea id="output" readonly></textarea>

</div>
</div>

<script>
flatpickr('#dateRange',{mode:'range',dateFormat:'Y-m-d'});

const skipWeekdays=new Set([0,6]);

document.querySelectorAll('.day-btn').forEach(btn=>{
btn.onclick=()=>{
btn.classList.toggle('active');
const d=Number(btn.dataset.day);
btn.classList.contains('active')
? skipWeekdays.add(d)
: skipWeekdays.delete(d);
};
});

const template=`INSERT INTO "time".time_record(created_at,updated_at,identification_no,inout_flag,source,location_id,reference_code,
status,machine_ip,machine_name,location_name,set_id,empl_id,lat,lng,record_type,record_time,record_date,last_update,kafka_time,source_type,split_in_out)
VALUES
('x1 x4_in','x1 x4_in','x2','0','15','5001','x2','N','IP','IN','LOC','TH','x3',NULL,NULL,NULL,'x1 x4_in','x1','x1','x1','time-device','in'),
('x1 x4_out','x1 x4_out','x2','1','15','5001','x2','N','IP','OUT','LOC','TH','x3',NULL,NULL,NULL,'x1 x4_out','x1','x1','x1','time-device','out');`;

function generateSQL(){
if(!dateRange.value||!x2.value||!x3.value)
return alert('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö');

const [s,e]=dateRange.value.split(' to ');
let d=new Date(s);
const end=new Date(e||s);
let out='';

while(d<=end){

if(skipWeekdays.has(d.getDay())){
d.setDate(d.getDate()+1);
continue;
}

const day=d.toISOString().slice(0,10);

out+=template
.replaceAll('x1',day)
.replaceAll('x2',x2.value)
.replaceAll('x3',x3.value)
.replaceAll('x4_in',timeIn.value)
.replaceAll('x4_out',timeOut.value)
+'\n\n';

d.setDate(d.getDate()+1);
}

output.value=out.trim();
}

function copySQL(){
output.select();
document.execCommand('copy');
}
</script>

</body>
</html>